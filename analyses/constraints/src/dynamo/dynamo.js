const dynamoUrl = "https://app.dynaas-c-uw2.cloudos.autodesk.com/v1/graph/run";

const controllers = {};

// Generate 20 chars hash of object
function hash(obj) {
  return JSON.stringify(obj)
    .split("")
    .reduce((acc, char) => (acc = (acc << 5) - acc + char.charCodeAt(0)), 0);
}

export async function run() {
  return {
    type: "success",
    data: {
      info: {
        issues: [
          {
            nodeId: "21f1d60e-83a4-458b-ae84-1a0f1c6b74ac",
            nodeName: "PolyCurve.ByPoints",
            type: "WARNING",
            message:
              "PolyCurve.ByPoints operation failed. \r\nUnable to create Line. Points are likely coincident",
          },
        ],
        status: "WARNINGS",
        inputs: [
          {
            id: "f3e2d304-0332-4d74-bac5-6b6d0e7b7473",
            name: "Proposal",
            valueSchema: {
              typeId: "String",
              context: "single",
            },
            value:
              "[[90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-172.07505798339844,27.377351760864258,90.81534576416016,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-151.34864807128906,4.822150707244873,103.0073471069336,-139.76625061035156,22.23591423034668,103.0073471069336,-151.34864807128906,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-151.34864807128906,4.822150707244873,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,22.23591423034668,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873],[88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-134.53379821777344,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625,101.12039184570312,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-122.341796875,27.377349853515625,101.12039184570312,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-122.341796875,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-134.53379821777344,27.377349853515625,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,13.175041198730469,101.12039184570312,-134.53379821777344,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-134.53379821777344,27.377349853515625,88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,13.175041198730469,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625]]",
            valueString: {
              count: 1,
              value:
                "[[90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-172.07505798339844,27.377351760864258,90.81534576416016,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-151.34864807128906,4.822150707244873,90.81534576416016,-151.34864807128906,4.822150707244873,103.0073471069336,-139.76625061035156,22.23591423034668,103.0073471069336,-151.34864807128906,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-151.34864807128906,4.822150707244873,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-172.07505798339844,4.822150707244873,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-172.07505798339844,27.377351760864258,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-151.34864807128906,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-139.76625061035156,22.23591423034668,90.81534576416016,-139.76625061035156,27.377351760864258,90.81534576416016,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,90.81534576416016,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,22.23591423034668,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-139.76625061035156,27.377351760864258,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-172.07505798339844,27.377351760864258,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,22.23591423034668,103.0073471069336,-172.07505798339844,4.822150707244873,103.0073471069336,-151.34864807128906,4.822150707244873],[88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-134.53379821777344,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625,101.12039184570312,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-122.341796875,27.377349853515625,101.12039184570312,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-122.341796875,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-134.53379821777344,27.377349853515625,88.92839050292969,-134.53379821777344,27.377349853515625,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-147.9449920654297,13.175041198730469,101.12039184570312,-134.53379821777344,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-134.53379821777344,27.377349853515625,88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-122.341796875,27.377349853515625,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-122.341796875,4.7955474853515625,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-134.53379821777344,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-147.9449920654297,13.175041198730469,88.92839050292969,-147.9449920654297,4.7955474853515625,88.92839050292969,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,88.92839050292969,-147.9449920654297,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,13.175041198730469,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-147.9449920654297,4.7955474853515625,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-122.341796875,4.7955474853515625,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,13.175041198730469,101.12039184570312,-122.341796875,27.377349853515625,101.12039184570312,-134.53379821777344,27.377349853515625]]",
            },
            type: "StringInput",
          },
          {
            id: "ac0733e3-121e-4fb4-a90c-e1990060c4bd",
            name: "Constraints",
            valueSchema: {
              typeId: "String",
              context: "single",
            },
            value:
              "[[56.804447174072266,-131.69337463378906,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,59.2235221862793,-99.8614730834961,46.61165237426758,56.804447174072266,-131.69337463378906,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,59.2235221862793,-99.8614730834961,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,116.92717742919922,-100.32156372070312,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,116.92717742919922,-100.32156372070312,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758,116.92717742919922,-100.32156372070312,4.9534077644348145,59.2235221862793,-99.8614730834961,4.9534077644348145,59.2235221862793,-99.8614730834961,46.61165237426758,116.92717742919922,-100.32156372070312,4.9534077644348145,59.2235221862793,-99.8614730834961,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,59.2235221862793,-99.8614730834961,4.9534077644348145,56.804447174072266,-131.69337463378906,4.9534077644348145,56.804447174072266,-131.69337463378906,46.61165237426758,59.2235221862793,-99.8614730834961,4.9534077644348145,56.804447174072266,-131.69337463378906,46.61165237426758,59.2235221862793,-99.8614730834961,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,56.804447174072266,-131.69337463378906,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758]]",
            valueString: {
              count: 1,
              value:
                "[[56.804447174072266,-131.69337463378906,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,59.2235221862793,-99.8614730834961,46.61165237426758,56.804447174072266,-131.69337463378906,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,59.2235221862793,-99.8614730834961,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,116.92717742919922,-100.32156372070312,4.9534077644348145,116.92717742919922,-100.32156372070312,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,116.92717742919922,-100.32156372070312,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758,116.92717742919922,-100.32156372070312,4.9534077644348145,59.2235221862793,-99.8614730834961,4.9534077644348145,59.2235221862793,-99.8614730834961,46.61165237426758,116.92717742919922,-100.32156372070312,4.9534077644348145,59.2235221862793,-99.8614730834961,46.61165237426758,116.92717742919922,-100.32156372070312,46.61165237426758,59.2235221862793,-99.8614730834961,4.9534077644348145,56.804447174072266,-131.69337463378906,4.9534077644348145,56.804447174072266,-131.69337463378906,46.61165237426758,59.2235221862793,-99.8614730834961,4.9534077644348145,56.804447174072266,-131.69337463378906,46.61165237426758,59.2235221862793,-99.8614730834961,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,56.804447174072266,-131.69337463378906,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,56.804447174072266,-131.69337463378906,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,115.0372085571289,-149.93521118164062,4.9534077644348145,115.0372085571289,-149.93521118164062,46.61165237426758,115.0372085571289,-149.93521118164062,46.61165237426758]]",
            },
            type: "StringInput",
          },
        ],
        outputs: [
          {
            id: "118c41ee-f2ff-4cfc-a4e9-725ed1739881",
            name: "FailedVisualization",
            valueSchema: {
              typeId: "String",
              context: "single",
              format: "GLTF_MODEL",
            },
            value:
              "Z2xURgIAAADYDQAAtAMAAEpTT057ImFzc2V0Ijp7ImNvcHlyaWdodCI6IiIsImdlbmVyYXRvciI6IlNoYXJwR0xURiAxLjAuMC1hbHBoYTAwMjciLCJ2ZXJzaW9uIjoiMi4wIn0sImFjY2Vzc29ycyI6W3sibmFtZSI6IlBPU0lUSU9OIiwiYnVmZmVyVmlldyI6MCwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjkyLCJtYXgiOlsxMDMuMDA3MzQ3MTA2OTMzNiwyNy4zNzczNTE3NjA4NjQyNTgsMTcyLjA3NTA1Nzk4MzM5ODQ0XSwibWluIjpbODguOTI4MzkwNTAyOTI5NjksNC43OTU1NDc0ODUzNTE1NjI1LDEyMi4zNDE3OTY4NzVdLCJ0eXBlIjoiVkVDMyJ9LHsibmFtZSI6Ik5PUk1BTCIsImJ1ZmZlclZpZXciOjAsImJ5dGVPZmZzZXQiOjEyLCJjb21wb25lbnRUeXBlIjo1MTI2LCJjb3VudCI6OTIsIm1heCI6WzEsMSwxXSwibWluIjpbLTEsLTEsLTFdLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6MSwiY29tcG9uZW50VHlwZSI6NTEyMywiY291bnQiOjE4MCwidHlwZSI6IlNDQUxBUiJ9XSwiYnVmZmVyVmlld3MiOlt7ImJ1ZmZlciI6MCwiYnl0ZUxlbmd0aCI6MjIwOCwiYnl0ZVN0cmlkZSI6MjQsInRhcmdldCI6MzQ5NjJ9LHsiYnVmZmVyIjowLCJieXRlTGVuZ3RoIjozNjAsImJ5dGVPZmZzZXQiOjIyMDgsInRhcmdldCI6MzQ5NjN9XSwiYnVmZmVycyI6W3siYnl0ZUxlbmd0aCI6MjU2OH1dLCJtYXRlcmlhbHMiOlt7ImRvdWJsZVNpZGVkIjp0cnVlLCJwYnJNZXRhbGxpY1JvdWdobmVzcyI6eyJtZXRhbGxpY0ZhY3RvciI6MCwicm91Z2huZXNzRmFjdG9yIjowLjQwMDAwMDAwNTk2MDQ2NDV9fV0sIm1lc2hlcyI6W3sibmFtZSI6Im1lc2giLCJwcmltaXRpdmVzIjpbeyJhdHRyaWJ1dGVzIjp7IlBPU0lUSU9OIjowLCJOT1JNQUwiOjF9LCJpbmRpY2VzIjoyLCJtYXRlcmlh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",
            valueString: {
              count: 1,
              value: "glTF 3D model",
            },
            type: "Watch3D",
            nodeTypeProperties: {
              type: "Watch3dProperties",
              camera: {
                position: {
                  x: -162.15432739257812,
                  y: 70.97959899902344,
                  z: -4.53125,
                },
                look: {
                  x: -2.09527587890625,
                  y: -52.36732482910156,
                  z: -100.65127563476562,
                },
              },
            },
          },
          {
            id: "811a3474-9578-4bd7-af59-4c9a9c6f2a5a",
            name: "RuleVisualization",
            valueSchema: {
              typeId: "String",
              context: "single",
              format: "GLTF_MODEL",
            },
            value:
              "Z2xURgIAAAAoBwAA9AMAAEpTT057ImFzc2V0Ijp7ImNvcHlyaWdodCI6IiIsImdlbmVyYXRvciI6IlNoYXJwR0xURiAxLjAuMC1hbHBoYTAwMjciLCJ2ZXJzaW9uIjoiMi4wIn0sImFjY2Vzc29ycyI6W3sibmFtZSI6IlBPU0lUSU9OIiwiYnVmZmVyVmlldyI6MCwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjMwLCJtYXgiOlsxMTYuOTI3MTc3NDI5MTk5MjIsNDYuNjExNjUyMzc0MjY3NTgsMTQ5LjkzNTIxMTE4MTY0MDYyXSwibWluIjpbNTYuODA0NDQ3MTc0MDcyMjY2LDQuOTUzNDA3NzY0NDM0ODE0NSw5OS44NjE0NzMwODM0OTYxXSwidHlwZSI6IlZFQzMifSx7Im5hbWUiOiJOT1JNQUwiLCJidWZmZXJWaWV3IjowLCJieXRlT2Zmc2V0IjoxMiwiY29tcG9uZW50VHlwZSI6NTEyNiwiY291bnQiOjMwLCJtYXgiOlswLjk5OTI3NTIwNzUxOTUzMTIsMSwwLjk1NDI3Mzk5ODczNzMzNTJdLCJtaW4iOlstMC45OTcxMjQ3OTExNDUzMjQ3LC0xLC0wLjk5OTk2ODIzMDcyNDMzNDddLCJ0eXBlIjoiVkVDMyJ9LHsiYnVmZmVyVmlldyI6MSwiY29tcG9uZW50VHlwZSI6NTEyMywiY291bnQiOjM2LCJ0eXBlIjoiU0NBTEFSIn1dLCJidWZmZXJWaWV3cyI6W3siYnVmZmVyIjowLCJieXRlTGVuZ3RoIjo3MjAsImJ5dGVTdHJpZGUiOjI0LCJ0YXJnZXQiOjM0OTYyfSx7ImJ1ZmZlciI6MCwiYnl0ZUxlbmd0aCI6NzIsImJ5dGVPZmZzZXQiOjcyMCwidGFyZ2V0IjozNDk2M31dLCJidWZmZXJzIjpbeyJieXRlTGVuZ3RoIjo3OTJ9XSwibWF0ZXJpYWxzIjpbeyJkb3VibGVTaWRlZCI6dHJ1ZSwicGJyTWV0YWxsaWNSb3VnaG5lc3MiOnsibWV0YWxsaWNGYWN0b3IiOjAsInJvdWdobmVzc0ZhY3RvciI6MC40MDAwMDAwMDU5NjA0NjQ1fX1dLCJtZXNoZXMiOlt7Im5hbWUiOiJtZXNoIiwicHJpbWl0aXZlcyI6W3siYXR0cmlidXRlcyI6eyJQT1NJVElPTiI6MCwiTk9STUFMIjoxfSwiaW5kaWNlcyI6MiwibWF0ZXJpYWwiOjB9XX1dLCJub2RlcyI6W3sibWVzaCI6MH1dLCJzY2VuZSI6MCwic2NlbmVzIjpbeyJub2RlcyI6WzBdfV19GAMAAEJJTgC32ulCUYKeQKSkyEKIoQI8mtBBIuv9f7/j5GxCVXI6QhO5x0KIoQI8mtBBIuv9f7+32ulCVXI6QqSkyEKIoQI8mtBBIuv9f7+32ulCUYKeQKSkyEKIoQI8k56DIev9f7/j5GxCUYKeQBO5x0KIoQI8k56DIev9f7/j5GxCVXI6QhO5x0KIoQI8k56DIev9f78NE+ZCUYKeQGrvFUOA0H8/AAAAADjrGz232ulCUYKeQKSkyEKA0H8/AAAAADjrGz232ulCVXI6QqSkyEKA0H8/AAAAADjrGz232ulCVXI6QqSkyEIAAAAAAACAPwAAAIDj5GxCVXI6QhO5x0IAAAAAAACAPwAAAIDBN2NCVXI6QoGxA0MAAAAAAACAPwAAAIDj5GxCUYKeQBO5x0KSQ3+/8UvvIt4wm73BN2NCVXI6QoGxA0OSQ3+/8UvvIt4wm73j5GxCVXI6QhO5x0KSQ3+/8UvvIt4wm70NE+ZCUYKeQGrvFUOA0H8/8UtvIzjrGz232ulCVXI6QqSkyEKA0H8/8UtvIzjrGz0NE+ZCVXI6QmrvFUOA0H8/8UtvIzjrGz3BN2NCUYKeQIGxA0PJDZm+8UvvpE1LdD8NE+ZCUYKeQGrvFUPJDZm+8UvvpE1LdD8NE+ZCVXI6QmrvFUPJDZm+8UvvpE1LdD/BN2NCUYKeQIGxA0MAAACAAACAvwAAAADj5GxCUYKeQBO5x0IAAACAAACAvwAAAAC32ulCUYKeQKSkyEIAAACAAACAvwAAAAANE+ZCUYKeQGrvFUMAAACAAACAvwAAAADj5GxCUYKeQBO5x0KSQ3+/9HizI94wm73BN2NCUYKeQIGxA0OSQ3+/9HizI94wm73BN2NCVXI6QoGxA0OSQ3+/9HizI94wm70NE+ZCVXI6QmrvFUMAAAAAAACAPwAAAIDBN2NCVXI6QoGxA0PJDZm+8UvvpE1LdD8AAAEAAgADAAQABQAGAAcACAAJAAoACwAMAA0ADgAPABAAEQASABMAFAAVABYAFwAXABgAFQAZABoAGwALABwACQASABQAHQA=",
            valueString: {
              count: 1,
              value: "glTF 3D model",
            },
            type: "Watch3D",
            nodeTypeProperties: {
              type: "Watch3dProperties",
              camera: {
                position: {
                  x: -184.32408142089844,
                  y: 46.06187438964844,
                  z: 35.5086669921875,
                },
                look: {
                  x: 27.915618896484375,
                  y: -30.241901397705078,
                  z: -134.92543029785156,
                },
              },
            },
          },
          {
            id: "57c8232f-e846-452f-b2f1-5d268419488a",
            name: "List Create",
            value: [
              [],
              [
                {
                  Tags: {
                    Parent: null,
                  },
                  Area: 2239.1992517787007,
                  Volume: 6144.144716995254,
                  Vertices: [],
                },
              ],
            ],
          },
        ],
      },
    },
  };
}

export async function run2(code, state) {
  const hashId = hash(code);
  if (!controllers[hashId]) controllers[hashId] = new AbortController();
  let controller = controllers[hashId];

  controller.abort("aborting previous request");
  setTimeout(() => controller.abort("timeout"), 30000);
  controller = new AbortController();
  const { signal } = controller;
  try {
    const response = await fetch(dynamoUrl, {
      signal,
      method: "POST",
      body: JSON.stringify({
        target: {
          type: "JsonGraphTarget",
          contents: JSON.stringify(code),
        },
        ignoreInputs: false,
        getImage: false,
        getGeometry: false,
        getContents: false,
        inputs: Object.entries(state).map(([nodeId, value]) => ({
          nodeId,
          value,
        })),
      }),
    });

    return { data: await response.json(), type: "success" };
  } catch (e) {
    if (e.name === "AbortError") {
      if (signal.reason === "aborting previous request") {
        return { type: "aborted" };
      } else {
        throw Error("Request timed out after 30 seconds");
      }
    } else {
      throw e;
    }
  }
}
